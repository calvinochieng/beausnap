
{% extends "./auth.html" %}

{% load static %}


{% block title %}Sign In {% endblock %}

{% block content %}
    <div class="w-full max-w-md space-y-8 animate-fade-in">

      <!-- Title -->
      <div class="text-center">
        <h2 class="text-3xl font-bold text-white mb-2">Welcome Back</h2>
        <p class="text-sm text-gray-400">
          Don’t have an account?
          <a href="{% url 'signup' %}" class="font-medium text-[var(--primary-color)] hover:text-opacity-80 transition-opacity">
            <i class="fas fa-arrow-right mr-1"></i> Sign up
          </a>
        </p>
      </div>

      <!-- Primary Google Login -->
      <div class="space-y-4">
        <div class="text-center">
          <h3 class="text-lg font-semibold text-white mb-2">Quick & Secure Login</h3>
          <p class="text-sm text-gray-400">Sign in with your Google account</p>
        </div>

        <a href="{% url 'social:begin' 'google-oauth2' %}"
           class="group relative flex w-full items-center justify-center gap-3 rounded-xl h-14 px-6 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold text-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 shadow-lg hover:shadow-xl border-2 border-blue-500 hover:border-blue-400 transform hover:scale-[1.02] active:scale-[0.98]">
          <i class="fa-brands fa-google text-xl group-hover:scale-110 transition-transform"></i>
          <span>Continue with Google</span>
          <div class="absolute -top-3 -right-3">
            <span class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-md animate-pulse">
              ✓ Recommended
            </span>
          </div>
        </a>
      </div>

      <!-- Manual Auth Toggle -->
      <div class="relative my-8">
        <div class="absolute inset-0 flex items-center">
          <div class="w-full border-t border-[#282839]"></div>
        </div>
        <div class="relative flex justify-center">
          <button type="button"
                  id="toggle-manual-auth"
                  class="group bg-[#111118] px-4 py-2 rounded-full border border-[#282839] hover:border-[#3b3b54] transition-all duration-300 text-sm text-gray-400 hover:text-white flex items-center gap-2">
            <i class="fas fa-keyboard group-hover:rotate-12 transition-transform"></i>
            <span id="toggle-text">Add Your Credentials Manually</span>
            <i class="fas fa-chevron-down group-hover:translate-y-1 transition-transform" id="toggle-icon"></i>
          </button>
        </div>
      </div>

      <!-- Collapsible Manual Auth Form -->
      <div id="manual-auth-section" class="hidden space-y-6">
        <div class="text-center mb-4">
          <h4 class="text-md font-medium text-gray-300">Manual Login</h4>
          <p class="text-xs text-gray-500">Enter your email and password</p>
        </div>

        <form class="space-y-6" method="POST" id="manual-auth-form">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.GET.next }}">
        {{ form.non_field_errors }}
        <div class="space-y-6 rounded-xl bg-[#181820] p-6 shadow-lg border border-[#282839]">
          
          <!-- Email -->
          <div class="input-focus-effect relative">
            <label class="block text-sm font-medium text-gray-300 mb-2" for="login">
              <i class="fas fa-envelope mr-2"></i> Email
            </label>
            <div class="relative">
              <input id="username"
                     name="username"
                     type="email"
                     required
                     placeholder="you@example.com"
                     autocomplete="email"
                     class="w-full h-12 pl-10 pr-4 rounded-lg bg-transparent border border-[#282839] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] text-white placeholder-gray-500" />
              <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500">
                <i class="fas fa-envelope"></i>
              </div>
            </div>
            <div class="focus-border absolute bottom-0 left-0 h-0.5 bg-[var(--primary-color)] scale-x-0 origin-left transition-transform duration-300"></div>
          </div>
          <div class="text-red-500 text-sm">{{ form.login.errors }}</div>

          <!-- Password -->
          <div class="input-focus-effect relative">
            <label class="block text-sm font-medium text-gray-300 mb-2" for="password">
              <i class="fas fa-lock mr-2"></i> Password
            </label>
            <div class="relative">
              <input id="password"
                     name="password"
                     type="password"
                     required
                     placeholder="••••••••"
                     autocomplete="current-password"
                     class="w-full h-12 pl-10 pr-10 rounded-lg bg-transparent border border-[#282839] focus:outline-none focus:ring-2 focus:ring-[var(--primary-color)] text-white placeholder-gray-500" />
              <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500">
                <i class="fas fa-lock"></i>
              </div>
              <button type="button"
                      class="absolute inset-y-0 right-0 flex items-center pr-3 toggle-password text-gray-500 hover:text-white"
                      data-target="#password">
                <i class="fas fa-eye toggle-icon"></i>
              </button>
            </div>
            <div class="focus-border absolute bottom-0 left-0 h-0.5 bg-[var(--primary-color)] scale-x-0 origin-left transition-transform duration-300"></div>
          </div>
        <div class="text-red-500 text-sm">{{ form.password.errors }}</div>

          <!-- Remember Me & Forgot Password -->
          <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 text-sm">
            <label class="flex items-center cursor-pointer">
              <input type="checkbox" name="remember-me" class="h-4 w-4 rounded border-gray-600 bg-[#282839] text-[var(--primary-color)] focus:ring-[var(--primary-color)]">
              <span class="ml-2 text-gray-300">Remember me</span>
            </label>
            <a href="#" class="font-medium text-[var(--primary-color)] hover:underline transition-colors flex items-center">
              <i class="fas fa-key mr-1"></i> Forgot password?
            </a>
          </div>
        </div>

          <!-- Submit Button -->
          <button type="submit"
                  class="w-full h-12 rounded-lg bg-gradient-to-r from-purple-600 to-purple-700 text-white font-bold text-base hover:from-purple-700 hover:to-purple-800 active:scale-98 transition-all shadow-md hover:shadow-lg border border-purple-500">
            <i class="fas fa-sign-in-alt mr-2"></i> Sign In Manually
          </button>

          <!-- TOS -->
          <p class="text-xs text-center text-gray-500 mt-4">
            By signing in, you agree to our
            <a href="{% url 'terms' %}" class="text-[var(--primary-color)] hover:underline">Terms of Service</a> and
            <a href="{% url 'privacy' %}" class="text-[var(--primary-color)] hover:underline">Privacy Policy</a>.
          </p>
        </form>
      </div>

      <!-- JavaScript for Toggle -->
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const toggleBtn = document.getElementById('toggle-manual-auth');
          const manualSection = document.getElementById('manual-auth-section');
          const toggleText = document.getElementById('toggle-text');
          const toggleIcon = document.getElementById('toggle-icon');

          toggleBtn.addEventListener('click', function() {
            const isHidden = manualSection.classList.contains('hidden');

            if (isHidden) {
              manualSection.classList.remove('hidden');
              manualSection.classList.add('animate-fade-in');
              toggleText.textContent = 'Hide Manual Login';
              toggleIcon.classList.remove('fa-chevron-down');
              toggleIcon.classList.add('fa-chevron-up');
            } else {
              manualSection.classList.add('hidden');
              toggleText.textContent = 'Add Your Credentials Manually';
              toggleIcon.classList.remove('fa-chevron-up');
              toggleIcon.classList.add('fa-chevron-down');
            }
          });
        });
      </script>
    </div>
{% endblock content %}